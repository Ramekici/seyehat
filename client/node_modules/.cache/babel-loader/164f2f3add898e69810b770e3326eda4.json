{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import{BACK_SERVER_URL}from'../Config';import axios from'axios';;var initialState={isCompleted:false,isAuthenticated:false,personelData:{token:'',userId:'',email:'',name:'',lastName:'',admin:false},authRedirectPath:'/',message:'',errorLogin:{},errorRegister:{},defaultValReg:{name:'',lastName:'',email:'',password:'',rePassword:''},defaultValLog:{email:'',password:''}};export var authSlice=createSlice({name:'auth',initialState:initialState,reducers:{createUserStart:function createUserStart(state){state.isCompleted=false;},createUserSuccess:function createUserSuccess(state,action){state.message=action.payload;state.errorRegister='';state.isCompleted=true;},messageReset:function messageReset(state){state.message='';},loginUserSuccess:function loginUserSuccess(state,action){state.isAuthenticated=true;state.personelData=action.payload;state.errorLogin={};state.isCompleted=true;},createUserRegisterFail:function createUserRegisterFail(state,action){state.isCompleted=false;state.errorRegister=action.payload;},createUserLoginFail:function createUserLoginFail(state,action){state.isCompleted=false;state.errorLogin=action.payload;},setAuthRedirect:function setAuthRedirect(state,action){state.authRedirectPath=action.payload;},logoutUserState:function logoutUserState(state){state.isAuthenticated=false;state.personelData={token:'',userId:'',email:'',name:'',lastName:'',admin:false};}}});var _authSlice$actions=authSlice.actions,createUserStart=_authSlice$actions.createUserStart,createUserSuccess=_authSlice$actions.createUserSuccess,createUserLoginFail=_authSlice$actions.createUserLoginFail,createUserRegisterFail=_authSlice$actions.createUserRegisterFail,loginUserSuccess=_authSlice$actions.loginUserSuccess,logoutUserState=_authSlice$actions.logoutUserState,setAuthRedirect=_authSlice$actions.setAuthRedirect,messageReset=_authSlice$actions.messageReset;export{createUserStart,createUserSuccess,createUserLoginFail,createUserRegisterFail,loginUserSuccess,logoutUserState,setAuthRedirect,messageReset};export var createUser=function createUser(data){return function(dispatch){dispatch(createUserStart());axios.post(\"\".concat(BACK_SERVER_URL,\"/api/users/register\"),data).then(function(res){dispatch(createUserSuccess(res.data.message));}).catch(function(err){dispatch(createUserRegisterFail(err.response.data));});};};export var updateUser=function updateUser(data){return function(dispatch){var token=localStorage.getItem('token');dispatch(createUserStart());axios.post(\"\".concat(BACK_SERVER_URL,\"/api/users/update\"),data,{headers:{'Authorization':'Bearer '+token}}).then(function(res){dispatch(createUserSuccess(res.data.message));dispatch(messageReset());}).catch(function(err){dispatch(createUserRegisterFail(err.response.data));});};};export var loginUser=function loginUser(data){return function(dispatch){dispatch(createUserStart());axios.post(\"\".concat(BACK_SERVER_URL,\"/api/users/login\"),data).then(function(response){var payload={token:response.data.token,userId:response.data.userId,email:response.data.email,name:response.data.name,lastName:response.data.lastName,admin:response.data.admin};dispatch(loginUserSuccess(payload));if(response.data.token){var expiresInDuration=response.data.expiresIn;dispatch(setAuthTimer(expiresInDuration));var now=new Date();var expirationDate=new Date(now.getTime()+expiresInDuration*1000);saveAuthData(response.data.token,expirationDate,response.data.userId);};}).catch(function(err){dispatch(createUserLoginFail(err.response.data));});};};export var logoutUser=function logoutUser(){return function(dispatch){clearAuthData();dispatch(logoutUserState());};};export var setAuthTimer=function setAuthTimer(duration){return function(dispatch){setTimeout(function(){dispatch(logoutUser());},duration*1000);};};export var saveAuthData=function saveAuthData(token,expirationDate,userId){localStorage.setItem('token',token);localStorage.setItem('expiration',expirationDate.toISOString());localStorage.setItem('userId',userId);};export var clearAuthData=function clearAuthData(){localStorage.removeItem('token');localStorage.removeItem('expiration');localStorage.removeItem('userId');};export var getAuthData=function getAuthData(){var userId=localStorage.getItem('userId');var token=localStorage.getItem('token');var expirationDate=localStorage.getItem('expiration');if(!token||!expirationDate){return;}return{token:token,expirationDate:new Date(expirationDate),userId:userId};};export var autoAuthUser=function autoAuthUser(){return function(dispatch){var authInformation=getAuthData();if(!authInformation){return;}var now=new Date();var expiresIn=authInformation.expirationDate.getTime()-now.getTime();if(expiresIn>0){//dispatch(saveAuthData(authInformation.token, \n//    authInformation.expirationDate, authInformation.userId));\ndispatch(setAuthTimer(expiresIn/1000));}};};export var stateAuth=function stateAuth(state){return state.auth;};export default authSlice.reducer;","map":{"version":3,"sources":["/Users/ramazanekici/new-app/client/src/features/auth/authSlice.ts"],"names":["createSlice","BACK_SERVER_URL","axios","initialState","isCompleted","isAuthenticated","personelData","token","userId","email","name","lastName","admin","authRedirectPath","message","errorLogin","errorRegister","defaultValReg","password","rePassword","defaultValLog","authSlice","reducers","createUserStart","state","createUserSuccess","action","payload","messageReset","loginUserSuccess","createUserRegisterFail","createUserLoginFail","setAuthRedirect","logoutUserState","actions","createUser","data","dispatch","post","then","res","catch","err","response","updateUser","localStorage","getItem","headers","loginUser","expiresInDuration","expiresIn","setAuthTimer","now","Date","expirationDate","getTime","saveAuthData","logoutUser","clearAuthData","duration","setTimeout","setItem","toISOString","removeItem","getAuthData","autoAuthUser","authInformation","stateAuth","auth","reducer"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { AppThunk, RootState } from '../../app/store';\nimport { BACK_SERVER_URL } from '../Config';\nimport axios from 'axios';\n\ninterface DefaultValReg{\n    name:string;\n    lastName:string, \n    email:string, \n    password:string, \n    rePassword: string\n}\n\ninterface DefaultValLog{\n    email:string, \n    password:string, \n}\ninterface PersonelData {\n    token: string, \n    userId: string,\n    email: string,\n    name: string,\n    lastName: string,\n    admin: boolean\n}\n\ninterface AuthState {\n    isCompleted:boolean;\n    isAuthenticated: boolean;\n    personelData: PersonelData;\n    authRedirectPath: string;\n    message: string;\n    errorLogin: any;\n    errorRegister: any;\n    defaultValReg: DefaultValReg,\n    defaultValLog: DefaultValLog\n};\n\n\n\nconst initialState: AuthState = {\n    isCompleted: false,\n    isAuthenticated: false,\n    personelData:{token: '', userId: '', email: '', name: '', lastName: '', admin: false},\n    authRedirectPath:'/',\n    message: '',\n    errorLogin: {},\n    errorRegister: {},\n    defaultValReg: {name:'', lastName:'', email:'', password:'', rePassword:''},\n    defaultValLog: {email:'', password:''}\n};\n\nexport const authSlice = createSlice({\n  name:'auth',\n  initialState,\n  reducers: {\n    createUserStart: (state) => {\n        state.isCompleted = false;\n    },\n    createUserSuccess: (state, action: PayloadAction<string>) => {\n        state.message= action.payload;\n        state.errorRegister = '';\n        state.isCompleted = true;\n    },\n    messageReset : (state) => {\n        state.message = '';\n    },\n    loginUserSuccess: (state, action: PayloadAction<PersonelData>) => {\n        state.isAuthenticated = true;\n        state.personelData = action.payload;\n        state.errorLogin = {};\n        state.isCompleted = true;\n    },\n    createUserRegisterFail: (state, action: PayloadAction<any>) => {\n        state.isCompleted = false;\n        state.errorRegister= action.payload;\n    },\n    createUserLoginFail: (state, action: PayloadAction<any>) => {\n        state.isCompleted = false;\n        state.errorLogin= action.payload;\n    },\n    setAuthRedirect: (state, action: PayloadAction<string>) =>{\n        state.authRedirectPath = action.payload;\n    },\n    logoutUserState: (state) => {\n        state.isAuthenticated = false;\n        state.personelData = {token: '', userId: '', email: '', name: '', lastName: '', admin: false};\n    }\n  },\n});\n\nexport const { createUserStart, createUserSuccess, createUserLoginFail, createUserRegisterFail,\n    loginUserSuccess, logoutUserState, setAuthRedirect, messageReset } = authSlice.actions;\n\nexport const createUser = (data: DefaultValReg): AppThunk  => dispatch => {\n    dispatch(createUserStart());\n    axios.post(`${BACK_SERVER_URL}/api/users/register`, data)\n    .then(res => {\n            dispatch(createUserSuccess(res.data.message));\n    })\n    .catch(err => {\n            dispatch(createUserRegisterFail(err.response.data));\n    })\n};\n\nexport const updateUser = (data: DefaultValLog): AppThunk => dispatch => {\n    const token = localStorage.getItem('token');\n    dispatch(createUserStart());\n    axios.post(`${BACK_SERVER_URL}/api/users/update`, \n        data, {headers: {'Authorization' : 'Bearer ' + token}})\n        .then(res => {\n            dispatch(createUserSuccess(res.data.message));\n            dispatch(messageReset());\n        })\n        .catch(err => {\n            dispatch(createUserRegisterFail(err.response.data));\n    })\n};\n\n\nexport const loginUser = (data: DefaultValLog): AppThunk => dispatch => {\n    dispatch(createUserStart());\n    axios.post(`${BACK_SERVER_URL}/api/users/login`, data)\n        .then(response => {\n            const payload = {\n                token: response.data.token, \n                userId: response.data.userId,\n                email: response.data.email,\n                name: response.data.name,\n                lastName: response.data.lastName,\n                admin: response.data.admin\n            }\n            dispatch(loginUserSuccess(payload));\n            if (response.data.token) {\n                const expiresInDuration = response.data.expiresIn;\n                dispatch(setAuthTimer(expiresInDuration));\n                const now = new Date();\n                const expirationDate = new Date(now.getTime() + expiresInDuration*1000);\n                saveAuthData(response.data.token, expirationDate, response.data.userId);\n            };             \n        })\n        .catch(err => {\n            dispatch(createUserLoginFail(err.response.data));\n        })\n};\n\nexport const logoutUser = (): AppThunk => dispatch => {\n    clearAuthData();\n    dispatch(logoutUserState());\n};\n\nexport const setAuthTimer = (duration:number): AppThunk => dispatch => {\n    setTimeout(() => {\n    dispatch(logoutUser());\n    }, duration*1000);\n}\n\nexport const saveAuthData = (token: string, expirationDate: Date, userId: string) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('expiration', expirationDate.toISOString());\n    localStorage.setItem('userId', userId);\n}\n\nexport const clearAuthData = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('expiration');\n    localStorage.removeItem('userId');\n}\n\nexport const getAuthData = () => {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    const expirationDate = localStorage.getItem('expiration');\n    if (!token || !expirationDate) {\n      return;\n    }\n    return {\n      token,\n      expirationDate: new Date(expirationDate),\n      userId\n    };\n}\n\nexport const autoAuthUser = () : AppThunk  => dispatch => {\n    const authInformation = getAuthData();\n    if (!authInformation) {\n      return;\n    }\n    const now = new Date();\n    const expiresIn = authInformation.expirationDate.getTime() - now.getTime();\n    if (expiresIn > 0) {\n        //dispatch(saveAuthData(authInformation.token, \n        //    authInformation.expirationDate, authInformation.userId));\n        dispatch(setAuthTimer(expiresIn / 1000));\n    }\n  }\n\nexport const stateAuth = (state: RootState) => state.auth;\n\nexport default authSlice.reducer;"]},"metadata":{},"sourceType":"module"}