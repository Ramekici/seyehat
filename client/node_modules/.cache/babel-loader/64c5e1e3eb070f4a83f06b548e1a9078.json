{"ast":null,"code":"var _jsxFileName = \"/Users/ramazanekici/new-app/client/src/components/admin/veriler/VerilerCreate.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setVerilerToDatabase, stateVeri, updateVeriler, setMessage, stateDatas } from '../../../features/veriler/verilerSlice';\nimport { getKategoriler, stateKategoriler } from '../../../features/veriler/kategorilerSlice';\nimport '../../components/date/SelectedDate.css';\nimport Selector from '../inputUI/Selector';\nimport Tarih from '../inputUI/Tarih';\nimport InputText from '../inputUI/InputText';\nimport VerilerList from './VerilerList';\nimport Tooltip from './Tooltip';\nimport Heading from '../inputUI/Heading';\nimport Button from '../inputUI/Button';\n\nconst VerilerCreate = () => {\n  const dispatch = useDispatch(); //// state\n\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [veri, setVeri] = useState({\n    name: '',\n    surName: '',\n    mission: '',\n    category: ''\n  });\n  const {\n    name,\n    surName,\n    mission,\n    category\n  } = veri; ////// redux\n\n  const data = useSelector(stateVeri); //////\n\n  const genel = useSelector(stateDatas);\n  const kategoriDatas = useSelector(stateKategoriler); ////input fonksiyon\n\n  const onHandleVeri = name => event => {\n    setVeri({ ...veri,\n      [name]: event.target.value\n    });\n  }; ///// Kategori Part\n\n\n  useEffect(() => {\n    dispatch(getKategoriler());\n  }, [dispatch]);\n  let kategorilerim = [];\n  let missions = [];\n  kategoriDatas.map(item => kategorilerim.push(item.category));\n  useEffect(() => {\n    if (category !== '') {\n      const el = kategoriDatas.find(item => item.category === category);\n      missions = el.missions;\n    }\n  }, [category]); /////// Error Part\n\n  const [errors, setErrors] = useState({\n    nam: '',\n    surNam: '',\n    categor: '',\n    missio: ''\n  });\n  const {\n    nam,\n    surNam,\n    categor,\n    missio\n  } = errors;\n  useEffect(() => {\n    setErrors({ ...genel.errors\n    });\n  }, [genel.errors]); ///// update part\n\n  useEffect(() => {\n    if (genel.updateId !== '') {\n      setVeri({\n        name: genel.updateEl.name,\n        surName: genel.updateEl.surName,\n        category: genel.updateEl.category,\n        mission: genel.updateEl.mission\n      });\n      setStartDate(new Date(genel.updateEl.start));\n      setEndDate(new Date(genel.updateEl.end));\n    }\n  }, [genel.updateId]);\n  useEffect(() => {\n    if (genel.isCompleted) {\n      setVeri({\n        name: '',\n        surName: '',\n        category: '',\n        mission: ''\n      });\n      setStartDate(new Date());\n      setEndDate(new Date());\n    }\n  }, [genel.isCompleted]); /// submit part \n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    let payload = {\n      _id: '',\n      user: '',\n      category,\n      mission,\n      name,\n      surName,\n      start: startDate.toISOString().split('T')[0],\n      end: endDate.toISOString().split('T')[0]\n    };\n\n    if (genel.updateEl) {\n      payload = {\n        _id: genel.updateEl._id,\n        user: genel.updateEl.user,\n        category,\n        mission,\n        name,\n        surName,\n        start: startDate.toISOString().split('T')[0],\n        end: endDate.toISOString().split('T')[0]\n      };\n      dispatch(updateVeriler(genel.updateEl._id, payload, category, mission));\n    } else {\n      dispatch(setVerilerToDatabase(payload));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    style: {\n      marginLeft: \"-10px\",\n      marginRight: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    message: genel.message,\n    onDeleteMessage: () => dispatch(setMessage()),\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"pb-2\",\n    style: {\n      borderBottom: \"2px solid darkgray\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    text: \"Yeni Veri Giri\\u015Fi/G\\xFCncelleme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Selector, {\n    title: \"Kategori\",\n    items: kategorilerim,\n    item: category,\n    onHandleVeri: onHandleVeri(\"category\"),\n    error: categor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Selector, {\n    title: \"G\\xF6revler\",\n    items: missionEls,\n    item: mission,\n    onHandleVeri: onHandleVeri(\"mission\"),\n    error: missio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-lg-6 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    col: \"col\",\n    id: \"ad\",\n    onChangeHandler: onHandleVeri(\"name\"),\n    val: name,\n    label: \"Ad\",\n    type: \"text\",\n    error: nam,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-lg-6 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    col: \"col\",\n    id: \"soyad\",\n    onChangeHandler: onHandleVeri(\"surName\"),\n    val: surName,\n    label: \"Soyad\",\n    type: \"text\",\n    error: surNam,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(Tarih, {\n    startDate: startDate,\n    endDate: endDate,\n    onChangeHandlerStart: date => setStartDate(date),\n    onChangeHandlerEnd: date => setEndDate(date),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    text: genel.updateEl._id !== '' ? 'Güncelle' : 'Kaydet',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(VerilerList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default VerilerCreate;","map":{"version":3,"sources":["/Users/ramazanekici/new-app/client/src/components/admin/veriler/VerilerCreate.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","setVerilerToDatabase","stateVeri","updateVeriler","setMessage","stateDatas","getKategoriler","stateKategoriler","Selector","Tarih","InputText","VerilerList","Tooltip","Heading","Button","VerilerCreate","dispatch","startDate","setStartDate","Date","endDate","setEndDate","veri","setVeri","name","surName","mission","category","data","genel","kategoriDatas","onHandleVeri","event","target","value","kategorilerim","missions","map","item","push","el","find","errors","setErrors","nam","surNam","categor","missio","updateId","updateEl","start","end","isCompleted","onSubmitHandler","e","preventDefault","payload","_id","user","toISOString","split","marginLeft","marginRight","message","borderBottom","missionEls","date"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setVerilerToDatabase, stateVeri,\n    updateVeriler, setMessage, stateDatas} \n    from '../../../features/veriler/verilerSlice';\n\n\nimport { getKategoriler, stateKategoriler } from '../../../features/veriler/kategorilerSlice';\n\nimport '../../components/date/SelectedDate.css';\nimport Selector from '../inputUI/Selector';\nimport Tarih from '../inputUI/Tarih';\nimport InputText from '../inputUI/InputText';\nimport VerilerList from './VerilerList';\nimport Tooltip from './Tooltip';\nimport Heading from '../inputUI/Heading';\nimport Button from '../inputUI/Button';\n\nconst VerilerCreate = () => {\n\n    const dispatch = useDispatch();\n    //// state\n    const [startDate, setStartDate] = useState(new Date());\n    const [endDate, setEndDate] = useState(new Date());\n    const [veri, setVeri] = useState({name:'', surName:'', mission:'', category:''});\n    const {name, surName, mission, category} = veri;\n    ////// redux\n\n    const data = useSelector(stateVeri);\n\n    //////\n    const genel = useSelector(stateDatas);\n    const kategoriDatas = useSelector(stateKategoriler);\n    \n\n    \n   \n    ////input fonksiyon\n    const onHandleVeri = (name:string) => (event:any) => {\n        setVeri({...veri, [name]: event.target.value})\n    }\n\n    ///// Kategori Part\n    useEffect(() => {\n        dispatch(getKategoriler());\n    }, [dispatch]);\n\n    \n    let kategorilerim:Array<string> = [];\n    let missions:Array<string> = [];\n    \n    kategoriDatas.map(item => kategorilerim.push(item.category));\n\n    useEffect(()=> {\n        if(category !== '') {\n            const el = kategoriDatas.find(item => item.category === category);\n            missions = el.missions;\n        } \n    }, [category])\n\n    /////// Error Part\n\n    const [errors, setErrors] = useState({nam:'', surNam:'', categor:'', missio:''});\n    const {nam, surNam, categor, missio} = errors;\n\n    useEffect(() => {\n        setErrors({...genel.errors});\n    },[genel.errors])\n\n    ///// update part\n\n\n    useEffect(() => {\n        if (genel.updateId !== '') {\n            setVeri({name: genel.updateEl.name, surName: genel.updateEl.surName, \n                category: genel.updateEl.category, mission: genel.updateEl.mission});\n            setStartDate(new Date(genel.updateEl.start));\n            setEndDate(new Date(genel.updateEl.end))\n        }\n    }, [genel.updateId])\n\n    useEffect(() => {\n        if(genel.isCompleted) {\n           setVeri({name: '', surName: '', category: '', mission: ''});\n            setStartDate(new Date());\n            setEndDate(new Date()) \n        }\n        \n    },[genel.isCompleted])\n\n    \n    /// submit part \n\n    const onSubmitHandler = (e:any) => {\n        e.preventDefault();\n        let payload = { _id: '', user: '', category, mission, name, surName, \n            start: startDate.toISOString().split('T')[0], \n            end: endDate.toISOString().split('T')[0] }\n        if(genel.updateEl) {\n            payload = {\n                _id: genel.updateEl._id, user:genel.updateEl.user, category, mission, name, surName, \n                start: startDate.toISOString().split('T')[0], \n                end: endDate.toISOString().split('T')[0]\n            }\n            dispatch(updateVeriler(genel.updateEl._id, payload, category, mission))\n        } else {\n           dispatch(setVerilerToDatabase(payload)); \n        } \n    }\n\n\n    return (\n        <div className=\"container\" style={{marginLeft:\"-10px\", marginRight:\"-10px\"}}>\n            <Tooltip \n                message={genel.message} \n                onDeleteMessage = {()=> dispatch(setMessage())}\n                data= {data}\n            />\n            <section className=\"pb-2\" style={{borderBottom:\"2px solid darkgray\"}}> \n                <Heading text=\"Yeni Veri Girişi/Güncelleme\" />\n                <form onSubmit={onSubmitHandler}>\n                    <div className=\"row align-items-center\">\n                        <div className=\"col-md-6\">\n                            <Selector\n                                title=\"Kategori\"\n                                items={kategorilerim} \n                                item={category}\n                                onHandleVeri={onHandleVeri(\"category\")}\n                                error={categor}/>\n                        </div>\n                        <div className=\"col-md-6\">\n                            <Selector\n                                title=\"Görevler\"\n                                items={missionEls} \n                                item={mission} \n                                onHandleVeri={onHandleVeri(\"mission\")}\n                                error={missio}/>\n                        </div>\n                    </div> \n                    <div className=\"row mt-3\">\n                            <div className=\"col-12 col-lg-6 px-0\">\n                                <InputText\n                                col=\"col\"\n                                id=\"ad\"\n                                onChangeHandler={onHandleVeri(\"name\")} \n                                val={name} \n                                label=\"Ad\"\n                                type=\"text\"\n                                error={nam}\n                                />\n                            </div>\n                            <div className=\"col-12 col-lg-6 px-0\">\n                                <InputText\n                                    col=\"col\"\n                                    id=\"soyad\"\n                                    onChangeHandler={onHandleVeri(\"surName\")} \n                                    val={surName} \n                                    label=\"Soyad\"\n                                    type=\"text\"\n                                    error={surNam}\n                                    />\n                            </div>\n                        </div>\n                        <Tarih \n                            startDate={startDate} \n                            endDate={endDate} \n                            onChangeHandlerStart={(date) => setStartDate(date)}\n                            onChangeHandlerEnd={(date) => setEndDate(date)}\n                        />\n                        <Button text = {genel.updateEl._id !== '' ? 'Güncelle': 'Kaydet'}/>\n                     \n                </form>\n            </section>\n            <VerilerList/>\n        </div>\n       \n        \n    )\n}\n\nexport default VerilerCreate;"]},"metadata":{},"sourceType":"module"}