{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n;\nconst el = {\n  _id: '',\n  user: '',\n  category: '',\n  mission: '',\n  name: '',\n  surName: '',\n  start: new Date(),\n  end: new Date()\n};\nconst initialState = {\n  veriler: [{\n    _id: \"1232\",\n    elemans: []\n  }],\n  veri: el,\n  verilerOzel: [],\n  errors: {},\n  gosterilen: 1,\n  isCompleted: false,\n  updateEl: el,\n  message: '',\n  tarih: new Date('29/10/1979')\n};\nexport const verilerSlice = createSlice({\n  name: 'veriler',\n  initialState,\n  reducers: {\n    setInitial: state => {\n      state.updateEl = el;\n      state.isCompleted = false;\n      state.errors = {};\n    },\n    setMessage: state => {\n      state.message = '';\n      state.veri = el;\n    },\n    setVeriler: (state, action) => {\n      state.veriler = action.payload;\n      state.isCompleted = true;\n    },\n    setVeri: (state, action) => {\n      state.veri = action.payload;\n      state.isCompleted = true;\n    },\n    setVerilerOzel: (state, action) => {\n      state.verilerOzel = action.payload;\n      state.isCompleted = true;\n    },\n    setDataFailed: (state, action) => {\n      state.errors = action.payload;\n      state.isCompleted = false;\n    },\n    setGosterilen: (state, action) => {\n      state.gosterilen = action.payload;\n    },\n    setUpdateEL: (state, action) => {\n      const eleman = state.verilerOzel.find(item => item._id === action.payload);\n      state.updateEl = eleman;\n    },\n    setVeriTarih: (state, action) => {\n      state.tarih = action.payload;\n    }\n  }\n});\nexport const {\n  setVeriler,\n  setVeri,\n  setDataFailed,\n  setUpdateEL,\n  setVerilerOzel,\n  setGosterilen,\n  setInitial,\n  setMessage,\n  setVeriTarih\n} = verilerSlice.actions; //// verileri getiriyor\n\nexport const getVeriler = date => dispatch => {\n  console.log(\"calıstı\");\n  const dat = date.toISOString().split(\"T\")[0];\n  axios.get(`http://localhost:5000/api/veriler?date=${date}`).then(res => {\n    dispatch(setVeriler(res.data));\n  }).catch(err => {\n    dispatch(setDataFailed(err));\n  });\n};\nexport const getVerilerOzel = (category, mission) => dispatch => {\n  axios.get(`http://localhost:5000/api/veriler/ozel?category=${category}&mission=${mission}`).then(res => {\n    dispatch(setVerilerOzel(res.data));\n  }).catch(err => {\n    dispatch(setDataFailed(err));\n  });\n};\nexport const setVerilerToDatabase = data => dispatch => {\n  const token = localStorage.getItem('token');\n  console.log(data);\n  axios.post('http://localhost:5000/api/veriler/create', data, {\n    headers: {\n      \"Authorization\": `Bearer ${token}`\n    }\n  }).then(res => {\n    dispatch(setVeri(res.data));\n    dispatch(setInitial());\n  }).catch(err => {\n    dispatch(setDataFailed(err.response.data));\n  });\n};\nexport const deleteVeriler = (id, category, mission) => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.delete(`http://localhost:5000/api/veriler/${id}`, {\n    headers: {\n      \"Authorization\": `Bearer ${token}`\n    }\n  }).then(res => {\n    dispatch(getVerilerOzel(category, mission));\n  }).catch(err => {\n    dispatch(setDataFailed(err));\n  });\n};\nexport const updateVeriler = (id, data, category, mission) => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.put(`http://localhost:5000/api/veriler/update/${id}`, data, {\n    headers: {\n      \"Authorization\": `Bearer ${token}`\n    }\n  }).then(res => {\n    dispatch(getVerilerOzel(category, mission));\n    dispatch(setInitial());\n  }).catch(err => {\n    dispatch(setDataFailed(err.response.data));\n  });\n};\nexport const stateVeri = state => state.veriler.veri;\nexport const verilerStates = state => state.veriler.veriler;\nexport const verilerOzelStates = state => state.veriler.verilerOzel;\nexport const stateGoster = state => state.veriler.gosterilen;\nexport const stateUpdateEl = state => state.veriler.updateEl;\nexport const stateCompleted = state => state.veriler.isCompleted;\nexport const stateMessage = state => state.veriler.message;\nexport const stateTarih = state => state.veriler.tarih;\nexport const stateErrors = state => state.veriler.errors;\nexport default verilerSlice.reducer;","map":{"version":3,"sources":["/Users/ramazanekici/new-app/client/src/features/veriler/verilerSlice.ts"],"names":["createSlice","axios","el","_id","user","category","mission","name","surName","start","Date","end","initialState","veriler","elemans","veri","verilerOzel","errors","gosterilen","isCompleted","updateEl","message","tarih","verilerSlice","reducers","setInitial","state","setMessage","setVeriler","action","payload","setVeri","setVerilerOzel","setDataFailed","setGosterilen","setUpdateEL","eleman","find","item","setVeriTarih","actions","getVeriler","date","dispatch","console","log","dat","toISOString","split","get","then","res","data","catch","err","getVerilerOzel","setVerilerToDatabase","token","localStorage","getItem","post","headers","response","deleteVeriler","id","delete","updateVeriler","put","stateVeri","verilerStates","verilerOzelStates","stateGoster","stateUpdateEl","stateCompleted","stateMessage","stateTarih","stateErrors","reducer"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { AppThunk, RootState } from '../../app/store';\nimport axios from 'axios';\n\ninterface Datas {\n  _id: string;\n  user: string;\n  category: string;\n  mission: string;\n  name: string;\n  surName: string;\n  start: Date;\n  end: Date;\n}\n\ninterface VeriDatas{\n  _id: string;\n  elemans:Array<Datas>\n}\n\ninterface VerilerState {\n  veriler:Array<VeriDatas>;\n  veri:Datas;\n  verilerOzel:Array <Datas>;\n  errors:{};\n  gosterilen: number;\n  isCompleted: boolean;\n  updateEl:Datas | undefined;\n  message:'';\n  tarih: Date;\n};\n\nconst el = { _id:'', user:'', category:'', mission:'', name:'', surName:'', start:new Date(), end:new Date()}\n\nconst initialState: VerilerState = {\n  veriler: [{_id:\"1232\", elemans:[]}],\n  veri: el,\n  verilerOzel:[],\n  errors:{},\n  gosterilen: 1, \n  isCompleted: false,\n  updateEl:el,\n  message:'',\n  tarih: new Date('29/10/1979')\n};\n\nexport const verilerSlice = createSlice({\n  name: 'veriler',\n  initialState,\n  reducers: {\n    setInitial:(state) => {\n      state.updateEl = el;\n      state.isCompleted = false;  \n      state.errors = {};\n    },\n    setMessage:(state) => {\n      state.message = '';\n      state.veri = el;\n    },\n    setVeriler:(state, action: PayloadAction<Array< VeriDatas>>) => {\n      state.veriler = action.payload;\n      state.isCompleted = true;\n    },\n    setVeri:(state, action: PayloadAction<Datas>) => {\n      state.veri = action.payload;\n      state.isCompleted = true;\n    },\n    setVerilerOzel:(state, action: PayloadAction<Array<Datas>>) => {\n      state.verilerOzel = action.payload;\n      state.isCompleted = true;\n    },\n    setDataFailed: (state, action: PayloadAction<Datas>) => {\n      state.errors = action.payload;\n      state.isCompleted = false;\n    },\n    setGosterilen:(state, action: PayloadAction<number>) => {\n      state.gosterilen = action.payload;\n    },\n    setUpdateEL:(state, action: PayloadAction<string>) => {\n      const eleman = state.verilerOzel.find(item => item._id === action.payload);\n      state.updateEl = eleman;\n    },\n    setVeriTarih:(state, action: PayloadAction<Date>) => {\n      state.tarih = action.payload;\n    }\n\n  },\n});\n\nexport const { setVeriler, setVeri, setDataFailed, setUpdateEL,\n  setVerilerOzel, setGosterilen, setInitial, setMessage, setVeriTarih } = verilerSlice.actions;\n\n\n//// verileri getiriyor\n\nexport const getVeriler = (date: Date) : AppThunk => dispatch => {\n  console.log(\"calıstı\")\n    const dat = date.toISOString().split(\"T\")[0];\n    axios.get(`http://localhost:5000/api/veriler?date=${date}`)\n    .then(res => {\n        dispatch(setVeriler(res.data));\n    })\n    .catch(err =>{\n        dispatch(setDataFailed(err))\n    })\n};\n\nexport const getVerilerOzel = (category: string, mission: string): AppThunk => dispatch => {\n  axios.get(`http://localhost:5000/api/veriler/ozel?category=${category}&mission=${mission}`)\n  .then(res => {\n      dispatch(setVerilerOzel(res.data))\n  })\n  .catch(err =>{\n      dispatch(setDataFailed(err))\n  })\n};\n\nexport const setVerilerToDatabase = (data: Datas ): AppThunk => dispatch => {\n  const token = localStorage.getItem('token');\n  console.log(data);\n  axios.post('http://localhost:5000/api/veriler/create', data,\n  {headers: {\"Authorization\": `Bearer ${token}`}})\n  .then(res => {\n    dispatch(setVeri(res.data));\n    dispatch(setInitial());\n  })\n  .catch(err =>{\n    dispatch(setDataFailed(err.response.data))\n  })\n};\n\n\nexport const deleteVeriler = (id: string, category: string, mission: string): AppThunk => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.delete(`http://localhost:5000/api/veriler/${id}`,\n  {headers: {\"Authorization\": `Bearer ${token}`}})\n  .then(res => {\n      dispatch(getVerilerOzel(category, mission))\n  })\n  .catch(err =>{\n      dispatch(setDataFailed(err))\n  })\n};\n\nexport const updateVeriler = (id: string, data: Datas, category: string, mission: string): AppThunk => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.put(`http://localhost:5000/api/veriler/update/${id}`, data,\n  {headers: {\"Authorization\": `Bearer ${token}`}})\n  .then(res => {\n      dispatch(getVerilerOzel(category, mission));\n      dispatch(setInitial());\n  })\n  .catch(err =>{\n      dispatch(setDataFailed(err.response.data))\n  })\n};\n\n\nexport const stateVeri = (state: RootState) => state.veriler.veri;\nexport const verilerStates = (state: RootState) => state.veriler.veriler;\nexport const verilerOzelStates = (state: RootState) => state.veriler.verilerOzel;\nexport const stateGoster = (state: RootState) => state.veriler.gosterilen;\nexport const stateUpdateEl = (state: RootState) => state.veriler.updateEl;\nexport const stateCompleted = (state: RootState) => state.veriler.isCompleted;\nexport const stateMessage = (state: RootState) => state.veriler.message;\nexport const stateTarih = (state: RootState) => state.veriler.tarih;\nexport const stateErrors = (state: RootState) => state.veriler.errors;\n\n\nexport default verilerSlice.reducer;"]},"metadata":{},"sourceType":"module"}