{"ast":null,"code":"var _jsxFileName = \"/Users/ramazanekici/new-app/client/src/components/admin/veriler/VerilerCreate.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setVerilerToDatabase, stateUpdateEl, stateVeri, stateCompleted, updateVeriler, stateMessage, setMessage, stateErrors } from '../../../features/veriler/verilerSlice';\nimport { getKategoriler, stateKategoriler } from '../../../features/veriler/kategorilerSlice';\nimport '../../components/date/SelectedDate.css';\nimport Selector from '../inputUI/Selector';\nimport Tarih from '../inputUI/Tarih';\nimport InputText from '../inputUI/InputText';\nimport VerilerList from './VerilerList';\nimport Tooltip from './Tooltip';\n\nconst VerilerCreate = () => {\n  const dispatch = useDispatch();\n  const updateEl = useSelector(stateUpdateEl);\n  const errorsDatabase = useSelector(stateErrors);\n  const completed = useSelector(stateCompleted);\n  const message = useSelector(stateMessage);\n  const data = useSelector(stateVeri);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [veri, setVeri] = useState({\n    name: '',\n    surName: '',\n    mission: '',\n    category: ''\n  });\n  const {\n    name,\n    surName,\n    mission,\n    category\n  } = veri;\n\n  const onHandleVeri = name => event => {\n    setVeri({ ...veri,\n      [name]: event.target.value\n    });\n  }; ///// Kategori Part\n\n\n  useEffect(() => {\n    dispatch(getKategoriler());\n  }, [dispatch]);\n  const kategoriDatas = useSelector(stateKategoriler);\n  let kategorilerim = [];\n  const [missionEls, setMissionEls] = useState([]);\n  kategoriDatas.map(item => kategorilerim.push(item.category));\n  useEffect(() => {\n    if (category !== '') {\n      const el = kategoriDatas.find(item => item.category === category);\n\n      if (el) {//setMissionEls(el.missions)   \n      }\n    }\n  }, [category]); /////// Error Part\n\n  const [errors, setErrors] = useState({\n    nam: '',\n    surNam: '',\n    categor: '',\n    missio: ''\n  });\n  const {\n    nam,\n    surNam,\n    categor,\n    missio\n  } = errors;\n  useEffect(() => {\n    setErrors({ ...errorsDatabase\n    });\n  }, [errorsDatabase]); ///// update part\n\n  useEffect(() => {\n    if (updateEl) {\n      setVeri({\n        name: updateEl.name,\n        surName: updateEl.surName,\n        category: updateEl.category,\n        mission: updateEl.mission\n      });\n      setStartDate(new Date(updateEl.start));\n      setEndDate(new Date(updateEl.end));\n    }\n  }, [updateEl]);\n  useEffect(() => {\n    if (completed) {\n      setVeri({\n        name: '',\n        surName: '',\n        category: '',\n        mission: ''\n      });\n      setStartDate(new Date());\n      setEndDate(new Date());\n    }\n  }, [completed]); /// submit part \n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    let payload = {\n      _id: '',\n      user: '',\n      category,\n      mission,\n      name,\n      surName,\n      start: startDate.toISOString().split('T')[0],\n      end: endDate.toISOString().split('T')[0]\n    };\n\n    if (updateEl) {\n      payload = {\n        _id: updateEl._id,\n        user: updateEl.user,\n        category,\n        mission,\n        name,\n        surName,\n        start: startDate.toISOString().split('T')[0],\n        end: endDate.toISOString().split('T')[0]\n      };\n      dispatch(updateVeriler(updateEl._id, payload, category, mission));\n    } else {\n      dispatch(setVerilerToDatabase(payload));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container my-5\",\n    style: {\n      marginLeft: \"-10px\",\n      marginRight: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    message: message,\n    onDeleteMessage: () => dispatch(setMessage()),\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"pb-2\",\n    style: {\n      borderBottom: \"2px solid darkgray\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"display-5 text-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \" Yeni Veri Giri\\u015Fi/G\\xFCncelleme \"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Selector, {\n    title: \"Kategori\",\n    items: kategorilerim,\n    item: category,\n    onHandleVeri: onHandleVeri(\"category\"),\n    error: categor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Selector, {\n    title: \"G\\xF6revler\",\n    items: missionEls,\n    item: mission,\n    onHandleVeri: onHandleVeri(\"mission\"),\n    error: missio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-lg-6 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    col: \"col\",\n    id: \"ad\",\n    onChangeHandler: onHandleVeri(\"name\"),\n    val: name,\n    label: \"Ad\",\n    type: \"text\",\n    error: nam,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-lg-6 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InputText, {\n    col: \"col\",\n    id: \"soyad\",\n    onChangeHandler: onHandleVeri(\"surName\"),\n    val: surName,\n    label: \"Soyad\",\n    type: \"text\",\n    error: surNam,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(Tarih, {\n    startDate: startDate,\n    endDate: endDate,\n    onChangeHandlerStart: date => setStartDate(date),\n    onChangeHandlerEnd: date => setEndDate(date),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-block btn-warning mx-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }, updateEl ? 'Güncelle' : 'Kaydet')))), /*#__PURE__*/React.createElement(VerilerList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default VerilerCreate;","map":{"version":3,"sources":["/Users/ramazanekici/new-app/client/src/components/admin/veriler/VerilerCreate.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","setVerilerToDatabase","stateUpdateEl","stateVeri","stateCompleted","updateVeriler","stateMessage","setMessage","stateErrors","getKategoriler","stateKategoriler","Selector","Tarih","InputText","VerilerList","Tooltip","VerilerCreate","dispatch","updateEl","errorsDatabase","completed","message","data","startDate","setStartDate","Date","endDate","setEndDate","veri","setVeri","name","surName","mission","category","onHandleVeri","event","target","value","kategoriDatas","kategorilerim","missionEls","setMissionEls","map","item","push","el","find","errors","setErrors","nam","surNam","categor","missio","start","end","onSubmitHandler","e","preventDefault","payload","_id","user","toISOString","split","marginLeft","marginRight","borderBottom","date"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setVerilerToDatabase, stateUpdateEl, stateVeri,stateCompleted,\n    updateVeriler, stateMessage, setMessage, stateErrors, upda } \n    from '../../../features/veriler/verilerSlice';\n\n\nimport { getKategoriler, stateKategoriler } from '../../../features/veriler/kategorilerSlice';\n\nimport '../../components/date/SelectedDate.css';\nimport Selector from '../inputUI/Selector';\nimport Tarih from '../inputUI/Tarih';\nimport InputText from '../inputUI/InputText';\nimport VerilerList from './VerilerList';\nimport Tooltip from './Tooltip';\n\n\nconst VerilerCreate = () => {\n\n    const dispatch = useDispatch();\n    const updateEl = useSelector(stateUpdateEl);\n    const errorsDatabase = useSelector(stateErrors);\n    const completed = useSelector(stateCompleted);\n    const message = useSelector(stateMessage);\n    const data = useSelector(stateVeri);\n    const [startDate, setStartDate] = useState(new Date());\n    const [endDate, setEndDate] = useState(new Date());\n\n    const [veri, setVeri] = useState({name:'', surName:'', mission:'', category:''})\n    const {name, surName, mission, category} = veri;\n\n    const onHandleVeri = (name:string) => (event:any) => {\n        setVeri({...veri, [name]: event.target.value})\n    }\n\n    ///// Kategori Part\n    useEffect(() => {\n        dispatch(getKategoriler());\n    }, [dispatch]);\n\n    const kategoriDatas = useSelector(stateKategoriler);\n    let kategorilerim:Array<string> = [];\n    const [missionEls, setMissionEls] = useState<Array<string>>([]);\n    \n    kategoriDatas.map(item => kategorilerim.push(item.category));\n\n    useEffect(()=> {\n        if(category !== '') {\n            const el = kategoriDatas.find(item => item.category === category);\n            if(el){\n               //setMissionEls(el.missions)   \n            }\n            \n        } \n    }, [category])\n\n    /////// Error Part\n\n    const [errors, setErrors] = useState({nam:'', surNam:'', categor:'', missio:''});\n    const {nam, surNam, categor, missio} = errors;\n\n    useEffect(() => {\n        setErrors({...errorsDatabase});\n    },[errorsDatabase])\n\n    ///// update part\n\n\n    useEffect(() => {\n        if (updateEl) {\n            setVeri({name: updateEl.name, surName: updateEl.surName, \n                category: updateEl.category, mission: updateEl.mission});\n            setStartDate(new Date(updateEl.start));\n            setEndDate(new Date(updateEl.end))\n        }\n    }, [updateEl])\n\n    useEffect(() => {\n        if(completed) {\n           setVeri({name: '', surName: '', category: '', mission: ''});\n            setStartDate(new Date());\n            setEndDate(new Date()) \n        }\n        \n    },[completed])\n\n    \n    /// submit part \n\n    const onSubmitHandler = (e:any) => {\n        e.preventDefault();\n        let payload = { _id: '', user: '', category, mission, name, surName, \n            start: startDate.toISOString().split('T')[0], \n            end: endDate.toISOString().split('T')[0] }\n        if(updateEl) {\n            payload = {\n                _id: updateEl._id, user:updateEl.user ,category, mission, name, surName, \n                start: startDate.toISOString().split('T')[0], \n                end: endDate.toISOString().split('T')[0]\n            }\n            dispatch(updateVeriler(updateEl._id, payload, category, mission))\n        } else {\n           dispatch(setVerilerToDatabase(payload)); \n        } \n    }\n\n\n    return (\n        <div className=\"container my-5\" style={{marginLeft:\"-10px\", marginRight:\"-10px\"}}>\n            <Tooltip \n                message={message} \n                onDeleteMessage = {()=> dispatch(setMessage())}\n                data= {data}\n            />\n            <section className=\"pb-2\" style={{borderBottom:\"2px solid darkgray\"}}> \n                <h2 className=\"display-5 text-gray\"> Yeni Veri Girişi/Güncelleme </h2>\n                <form onSubmit={onSubmitHandler}>\n                    <div className=\"row align-items-center\">\n                        <div className=\"col-md-6\">\n                            <Selector\n                                title=\"Kategori\"\n                                items={kategorilerim} \n                                item={category}\n                                onHandleVeri={onHandleVeri(\"category\")}\n                                error={categor}/>\n                        </div>\n                        <div className=\"col-md-6\">\n                            <Selector\n                                title=\"Görevler\"\n                                items={missionEls} \n                                item={mission} \n                                onHandleVeri={onHandleVeri(\"mission\")}\n                                error={missio}/>\n                        </div>\n                    </div> \n                    <div className=\"row mt-3\">\n                            <div className=\"col-12 col-lg-6 px-0\">\n                                <InputText\n                                col=\"col\"\n                                id=\"ad\"\n                                onChangeHandler={onHandleVeri(\"name\")} \n                                val={name} \n                                label=\"Ad\"\n                                type=\"text\"\n                                error={nam}\n                                />\n                            </div>\n                            <div className=\"col-12 col-lg-6 px-0\">\n                                <InputText\n                                    col=\"col\"\n                                    id=\"soyad\"\n                                    onChangeHandler={onHandleVeri(\"surName\")} \n                                    val={surName} \n                                    label=\"Soyad\"\n                                    type=\"text\"\n                                    error={surNam}\n                                    />\n                            </div>\n                        </div>\n                        <Tarih \n                            startDate={startDate} \n                            endDate={endDate} \n                            onChangeHandlerStart={(date) => setStartDate(date)}\n                            onChangeHandlerEnd={(date) => setEndDate(date)}\n                        />\n                        <div className=\"row mt-3\">\n                            <button type=\"submit\" \n                                className=\"btn btn-block btn-warning mx-5\"> \n                                {updateEl ? 'Güncelle': 'Kaydet'} \n                            </button>\n                    </div>  \n                </form>\n            </section>\n            <VerilerList/>\n        </div>\n       \n        \n    )\n}\n\nexport default VerilerCreate;"]},"metadata":{},"sourceType":"module"}